import{S as x,f as b,A as z}from"./element-plus.cf6cd281.js";import{i as L}from"./resize-observer-polyfill.8deb1e21.js";import{a as C,b as h}from"./is.84ee87a3.js";import{g as E}from"./@vueuse.a8259ae5.js";import{s as S,d as W,r as v,u as r,G as B,g as I,l as V,c as M,a as k,Y as _,i as $,S as p,o as R,W as g,X as w}from"./@vue.0d442241.js";import{u as N}from"./vue-i18n.e8ea0993.js";import"./lodash-es.8e3f760b.js";import"./@element-plus.1c8c10eb.js";import"./@popperjs.36402333.js";import"./@ctrl.b082b0c1.js";import"./dayjs.acca6e14.js";import"./async-validator.fb49d0f5.js";import"./memoize-one.4ee5c96d.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./@floating-ui.e0e8439f.js";import"./@intlify.372ce312.js";const T=typeof window>"u";function D(n){for(const s of n){const i=s.target.__resizeListeners__||[];i.length&&i.forEach(o=>{o()})}}function H(n,s){T||(n.__resizeListeners__||(n.__resizeListeners__=[],n.__ro__=new L(D),n.__ro__.observe(n)),n.__resizeListeners__.push(s))}function U(n,s){!n||!n.__resizeListeners__||(n.__resizeListeners__.splice(n.__resizeListeners__.indexOf(s),1),n.__resizeListeners__.length||n.__ro__.disconnect())}const A=Symbol("watermark-dom");function F(n=v(document.body)){const s=E(function(){const t=r(n);if(!t)return;const{clientHeight:e,clientWidth:l}=t;u({height:e,width:l})}),i=A.toString(),o=S();W(()=>{const t=document.getElementById(i);C(t)||(o.value=t)});const m=()=>{const t=r(o);o.value=void 0;const e=r(n);!e||(t&&e.removeChild(t),U(e,s))};function f(t){const e=document.createElement("canvas"),l=300,c=240;Object.assign(e,{width:l,height:c});const d=e.getContext("2d");return d&&(d.rotate(-20*Math.PI/120),d.font="15px Vedana",d.fillStyle="rgba(209, 213, 219, 0.5)",d.textAlign="left",d.textBaseline="middle",d.fillText(t,l/20,c)),e.toDataURL("image/png")}function u(t={}){const e=r(o);!e||(h(t.width)&&(e.style.width=`${t.width}px`),h(t.height)&&(e.style.height=`${t.height}px`),h(t.str)&&(e.style.background=`url(${f(t.str)}) left top repeat`))}const y=t=>{if(r(o))return u({str:t}),i;const e=document.createElement("div");o.value=e,e.id=i,e.style.pointerEvents="none",e.style.top="0px",e.style.left="0px",e.style.position="absolute",e.style.zIndex="100000";const l=r(n);if(!l)return i;const{clientHeight:c,clientWidth:d}=l;return u({str:t,width:d,height:c}),l.appendChild(e),i};function a(t){y(t),H(document.documentElement,s),I()&&B(()=>{m()})}return{setWatermark:a,clear:m}}const O={class:"relative w-full"},P={class:"p-5 absolute w-full"},j={class:"mt-3"},ce=V({__name:"WaterMark",setup(n){const{t:s}=N(),i="Miao Miao \u{1F431}",o=v(i),m=s("page.watermark.input.placeholder"),{setWatermark:f,clear:u}=F();return(y,a)=>{const t=x,e=b,l=z;return R(),M("div",O,[k("div",P,[_(t,{modelValue:r(o),"onUpdate:modelValue":a[0]||(a[0]=c=>$(o)?o.value=c:null),class:"max-w-sm",placeholder:r(m)},null,8,["modelValue","placeholder"]),k("div",j,[_(l,null,{default:p(()=>[_(e,{type:"primary",onClick:a[1]||(a[1]=c=>r(f)(r(o)))},{default:p(()=>[g(w(r(s)("page.watermark.btn.add")),1)]),_:1}),_(e,{type:"primary",onClick:a[2]||(a[2]=c=>r(f)(i))},{default:p(()=>[g(w(r(s)("page.watermark.btn.reset")),1)]),_:1}),_(e,{type:"danger",onClick:a[3]||(a[3]=c=>r(u)())},{default:p(()=>[g(w(r(s)("page.watermark.btn.delete")),1)]),_:1})]),_:1})])])])}}});export{ce as default};
