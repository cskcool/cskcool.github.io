import{f as Y,A as J,n as Q,N as ee,O as te,M as ae}from"./element-plus.5fccd8a0.js";import{l as Z,r as m,e as r,w as oe,d as ne,a8 as le,c as L,Z as o,S as n,P as se,u as t,ab as re,n as M,o as h,X as w,Y as k,R as O,W as j,L as ie,T as I,U as q,V as X,a as U,a6 as ue}from"./@vue.2de838a1.js";import{j as ce,k as pe}from"./@element-plus.a29bcabf.js";import{_ as de,s as me,u as fe,a as he,b as ve}from"./ArticleEditDialog.vuevuetypescriptsetuptruelang.e328d375.js";import{u as G}from"./vue-i18n.7b288722.js";import"./lodash-es.40e11708.js";import"./@vueuse.3e17e0c9.js";import"./@sxzz.53dd9bd6.js";import"./@ctrl.46158b0f.js";import"./dayjs.946139a6.js";import"./async-validator.6019f6c6.js";import"./memoize-one.4555600d.js";import"./escape-html.ee221422.js";import"./normalize-wheel-es.8b342dbc.js";import"./@floating-ui.6d94b87d.js";import"./is.84ee87a3.js";import"./index.b1fd0fc7.js";import"./vue-echarts.5193e598.js";import"./resize-detector.1805e1ab.js";import"./echarts.0420e38c.js";import"./tslib.0d9e002a.js";import"./zrender.04453364.js";import"./pinia.7cf17980.js";import"./vue-demi.03c5b283.js";import"./xe-utils.70389315.js";/* empty css                     */import"./vxe-table.b52143d8.js";import"./axios.0fca6a18.js";import"./form-data.cf705ae8.js";import"./js-cookie.9a5410bd.js";import"./@wangeditor.c469aefe.js";import"./yup.f12b920e.js";import"./nanoclone.76ad5e25.js";import"./lodash.32f48334.js";import"./property-expr.8748984a.js";import"./toposort.37803eaf.js";import"./vue-router.13cd3834.js";import"./nprogress.9e1d10bf.js";import"./@intlify.2be7587d.js";const ge=Z({__name:"SearchFilter",props:{options:{type:Array,required:!0},model:{type:Object,required:!0},loading:{type:Boolean,default:!1},searchDisabled:{type:Boolean,default:!1},resetDisabled:{type:Boolean,default:!1},showExpand:{type:Boolean,default:!1},showReset:{type:Boolean,default:!0}},emits:["search","reset"],setup(i,{emit:f}){const v=i,u=m(!1),_=m(0),b=m(!0),P=m(0),$=300,C=m(),y=m({}),{t:z}=G(),a=r(()=>{let e=Math.floor(_.value/$)||3;return e>4&&(e=4),e<1&&(e=1),e}),F=r(()=>v.showExpand&&x.value.length>a.value),D=r(()=>({span:24/a.value})),l=r(()=>v.options.filter(e=>!e.hidden)),V=r(()=>{let e=[],p=D.value.span;if(l.value.length<a.value-1)p=(a.value-l.value.length%a.value)*24/a.value,e=[...l.value];else for(let d=0;d<l.value.length;d++){const S=l.value[d];if(e.push(S),e.length>=a.value-1)break}return e.push({name:"search",scopedSlot:"search",colSpan:{span:p}}),e}),x=r(()=>{const e=(a.value-l.value.length%a.value)*24/a.value;return[...l.value,{name:"search",scopedSlot:"search",colSpan:{span:e}}]}),W=r(()=>u.value||!v.showExpand?x:V.value),g=m();function A(e){f("search",e)}function B(){var e;(e=C.value)==null||e.submit()}function E(){N(),M(()=>{f("reset")})}function N(...e){C.value.resetFields(...e)}function K(){u.value=!u.value}function c(){!b.value||(b.value=!1,P.value=setTimeout(()=>{g.value&&(_.value=g.value.offsetWidth,b.value=!0)},300))}function T(){M(()=>{_.value=g.value.clientWidth}),window.addEventListener("resize",c,!1)}return oe(()=>v.model,e=>{y.value=e},{immediate:!0}),ne(()=>{T()}),le(()=>{}),(e,p)=>{const d=Y,S=J,R=Q;return h(),L("div",{ref_key:"filterWrapRef",ref:g},[o(de,se({ref_key:"form",ref:C},e.$attrs,{value:y.value,"onUpdate:value":p[0]||(p[0]=s=>y.value=s),options:t(W).value,layout:"inline","col-span":t(D),gutter:12,onSubmit:A,onKeyup:re(B,["enter"])}),{search:n(()=>[o(S,null,{default:n(()=>[o(d,{type:"primary",icon:"search",loading:i.loading,disabled:i.searchDisabled,onClick:B},{default:n(()=>[w(k(t(z)("page.common.btn.search")),1)]),_:1},8,["loading","disabled"]),i.showReset?(h(),O(d,{key:0,type:"primary",icon:"brush",loading:i.loading,disabled:i.resetDisabled,onClick:E},{default:n(()=>[w(k(t(z)("page.common.btn.reset")),1)]),_:1},8,["loading","disabled"])):j("",!0)]),_:1}),ie(e.$slots,"extraButtons",{loading:i.loading}),t(F)?(h(),L("a",{key:0,onClick:K},[w(k(u.value?"\u6536\u8D77":"\u5C55\u5F00")+" ",1),I(o(R,null,{default:n(()=>[(h(),O(X(t(ce))))]),_:1},512),[[q,u.value]]),I(o(R,null,{default:n(()=>[(h(),O(X(t(pe))))]),_:1},512),[[q,!u.value]])])):j("",!0)]),_:3},16,["value","options","col-span","onKeyup"])],512)}}}),_e={class:"relative w-full"},be={class:"p-[8px] absolute w-full"},Ce={class:"mx-3 mt-5"},ye={class:"float-right mt-2"},rt=Z({__name:"ArticlePage",setup(i){const{t:f}=G(),v={title:"",content:"",type:""},{articleFilterOptions:u,articleColumns:_}=me(),b=m(v),P=r(()=>u.value),$=r(()=>C.value.length===0),{ids:C,loading:y,dataSource:z,ipagination:a,modalFormRef:F,loadData:D,handleSizeChange:l,handleCurrentChange:V,handleSelectionChange:x,handleOpenAddDialog:W,handleOpenEditDialog:g,handleDelete:A,handleBatchDelete:B,handleSearch:E,handleReset:N}=fe(he);return(K,c)=>{const T=ge,e=Y,p=ee,d=ue("c-table"),S=te,R=ae;return h(),L("div",_e,[U("div",be,[U("div",Ce,[o(T,{model:b.value,options:t(P),"show-reset":!0,onReset:t(N),onSearch:t(E)},null,8,["model","options","onReset","onSearch"])]),I((h(),O(d,{"table-data":t(z),"show-header":!0,columns:t(_),"header-align":"right",stripe:"",style:{width:"100%"},onSelectionChange:t(x)},{options:n(()=>[o(e,{icon:"refresh",circle:"",onClick:t(E)},null,8,["onClick"]),o(e,{type:"primary",icon:"plus",circle:"",onClick:t(W)},null,8,["onClick"]),o(p,{title:t(f)("page.common.btn.batchDelete_popover"),onConfirm:c[0]||(c[0]=s=>t(B)())},{reference:n(()=>[o(e,{disabled:t($),type:"danger",icon:"delete",circle:""},null,8,["disabled"])]),_:1},8,["title"])]),actions:n(({scope:s})=>[o(e,{size:"small",onClick:H=>t(g)(s.row)},{default:n(()=>[w(k(t(f)("page.common.btn.edit")),1)]),_:2},1032,["onClick"]),o(p,{title:t(f)("page.common.btn.delete_popover"),onConfirm:H=>t(A)(s.row.id)},{reference:n(()=>[o(e,{size:"small",type:"danger"},{default:n(()=>[w(k(t(f)("page.common.btn.delete")),1)]),_:1})]),_:2},1032,["title","onConfirm"])]),_:1},8,["table-data","columns","onSelectionChange"])),[[R,t(y)]]),U("div",ye,[o(S,{currentPage:t(a).current,"onUpdate:currentPage":c[1]||(c[1]=s=>t(a).current=s),"page-size":t(a).pageSize,"onUpdate:page-size":c[2]||(c[2]=s=>t(a).pageSize=s),small:"","page-sizes":t(a).pageSizeOptions,background:!0,layout:"sizes, prev, pager, next",total:t(a).total,onSizeChange:t(l),onCurrentChange:t(V)},null,8,["currentPage","page-size","page-sizes","total","onSizeChange","onCurrentChange"])])]),o(ve,{ref_key:"modalFormRef",ref:F,onClose:t(D)},null,8,["onClose"])])}}});export{rt as default};
