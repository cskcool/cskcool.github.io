import{f as Y,A as J,n as Q,K as ee,L as te,M as oe}from"./element-plus.e899ffcc.js";import{l as Z,r as m,e as i,w as ae,d as ne,a6 as le,c as K,Y as a,S as n,P as se,u as e,i as ie,a8 as re,n as M,o as h,W as w,X as k,R as P,V as j,L as ce,T as N,Z as q,U as X,a as U,ag as ue}from"./@vue.0d442241.js";import{j as pe,k as de}from"./@element-plus.1c8c10eb.js";import{_ as me,s as fe,u as he,a as ge,b as ve}from"./ArticleEditDialog.vuevuetypescriptsetuptruelang.6539b3e6.js";import{u as G}from"./vue-i18n.e8ea0993.js";import"./lodash-es.8e3f760b.js";import"./@vueuse.a8259ae5.js";import"./@popperjs.36402333.js";import"./@ctrl.b082b0c1.js";import"./dayjs.acca6e14.js";import"./async-validator.fb49d0f5.js";import"./memoize-one.4ee5c96d.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./@floating-ui.e0e8439f.js";import"./is.84ee87a3.js";import"./index.e9e86d1b.js";import"./vue-echarts.e07e4a9d.js";import"./resize-detector.4e96b72b.js";import"./echarts.7dfa8333.js";import"./tslib.60310f1a.js";import"./zrender.576c0651.js";import"./pinia.2904a94b.js";import"./vue-demi.65474690.js";import"./xe-utils.e9a24773.js";/* empty css                     */import"./vxe-table.f157cccd.js";import"./axios.bf59a495.js";import"./js-cookie.31874410.js";import"./@wangeditor.217166f2.js";import"./yup.c82b666c.js";import"./nanoclone.7d3cb5fe.js";import"./lodash.ff6f02b2.js";import"./property-expr.48609aa3.js";import"./toposort.dc2292b6.js";import"./vue-router.01a92808.js";import"./nprogress.4992843a.js";import"./@intlify.372ce312.js";const _e=Z({__name:"SearchFilter",props:{options:{type:Array,required:!0},model:{type:Object,required:!0},loading:{type:Boolean,default:!1},searchDisabled:{type:Boolean,default:!1},resetDisabled:{type:Boolean,default:!1},showExpand:{type:Boolean,default:!1},showReset:{type:Boolean,default:!0}},emits:["search","reset"],setup(r,{emit:f}){const g=r,c=m(!1),b=m(0),C=m(!0),O=m(0),$=300,y=m(),v=m({}),{t:z}=G(),o=i(()=>{let t=Math.floor(b.value/$)||3;return t>4&&(t=4),t<1&&(t=1),t}),F=i(()=>g.showExpand&&x.value.length>o.value),D=i(()=>({span:24/o.value})),l=i(()=>g.options.filter(t=>!t.hidden)),V=i(()=>{let t=[],p=D.value.span;if(l.value.length<o.value-1)p=(o.value-l.value.length%o.value)*24/o.value,t=[...l.value];else for(let d=0;d<l.value.length;d++){const S=l.value[d];if(t.push(S),t.length>=o.value-1)break}return t.push({name:"search",scopedSlot:"search",colSpan:{span:p}}),t}),x=i(()=>{const t=(o.value-l.value.length%o.value)*24/o.value;return[...l.value,{name:"search",scopedSlot:"search",colSpan:{span:t}}]}),W=i(()=>c.value||!g.showExpand?x:V.value),_=m();function A(t){f("search",t)}function B(){var t;(t=y.value)==null||t.submit()}function E(){L(),M(()=>{f("reset")})}function L(...t){y.value.resetFields(...t)}function I(){c.value=!c.value}function u(){!C.value||(C.value=!1,O.value=setTimeout(()=>{_.value&&(b.value=_.value.offsetWidth,C.value=!0)},300))}function T(){M(()=>{b.value=_.value.clientWidth}),window.addEventListener("resize",u,!1)}return ae(()=>g.model,t=>{v.value=t},{immediate:!0}),ne(()=>{T()}),le(()=>{}),(t,p)=>{const d=Y,S=J,R=Q;return h(),K("div",{ref_key:"filterWrapRef",ref:_},[a(me,se({ref_key:"form",ref:y},t.$attrs,{value:e(v),"onUpdate:value":p[0]||(p[0]=s=>ie(v)?v.value=s:null),options:e(W).value,layout:"inline","col-span":e(D),gutter:12,onSubmit:A,onKeyup:re(B,["enter"])}),{search:n(()=>[a(S,null,{default:n(()=>[a(d,{type:"primary",icon:"search",loading:r.loading,disabled:r.searchDisabled,onClick:B},{default:n(()=>[w(k(e(z)("page.common.btn.search")),1)]),_:1},8,["loading","disabled"]),r.showReset?(h(),P(d,{key:0,type:"primary",icon:"brush",loading:r.loading,disabled:r.resetDisabled,onClick:E},{default:n(()=>[w(k(e(z)("page.common.btn.reset")),1)]),_:1},8,["loading","disabled"])):j("",!0)]),_:1}),ce(t.$slots,"extraButtons",{loading:r.loading}),e(F)?(h(),K("a",{key:0,onClick:I},[w(k(e(c)?"\u6536\u8D77":"\u5C55\u5F00")+" ",1),N(a(R,null,{default:n(()=>[(h(),P(X(e(pe))))]),_:1},512),[[q,e(c)]]),N(a(R,null,{default:n(()=>[(h(),P(X(e(de))))]),_:1},512),[[q,!e(c)]])])):j("",!0)]),_:3},16,["value","options","col-span","onKeyup"])],512)}}}),be={class:"relative w-full"},Ce={class:"p-[8px] absolute w-full"},ye={class:"mx-3 mt-5"},Se={class:"float-right mt-2"},it=Z({__name:"ArticlePage",setup(r){const{t:f}=G(),g={title:"",content:"",type:""},{articleFilterOptions:c,articleColumns:b}=fe(),C=m(g),O=i(()=>c.value),$=i(()=>y.value.length===0),{ids:y,loading:v,dataSource:z,ipagination:o,modalFormRef:F,loadData:D,handleSizeChange:l,handleCurrentChange:V,handleSelectionChange:x,handleOpenAddDialog:W,handleOpenEditDialog:_,handleDelete:A,handleBatchDelete:B,handleSearch:E,handleReset:L}=he(ge);return(I,u)=>{const T=_e,t=Y,p=ee,d=ue("c-table"),S=te,R=oe;return h(),K("div",be,[U("div",Ce,[U("div",ye,[a(T,{model:e(C),options:e(O),"show-reset":!0,onReset:e(L),onSearch:e(E)},null,8,["model","options","onReset","onSearch"])]),N((h(),P(d,{"table-data":e(z),"show-header":!0,columns:e(b),"header-align":"right",stripe:"",style:{width:"100%"},onSelectionChange:e(x)},{options:n(()=>[a(t,{icon:"refresh",circle:"",onClick:e(E)},null,8,["onClick"]),a(t,{type:"primary",icon:"plus",circle:"",onClick:e(W)},null,8,["onClick"]),a(p,{title:e(f)("page.common.btn.batchDelete_popover"),onConfirm:u[0]||(u[0]=s=>e(B)())},{reference:n(()=>[a(t,{disabled:e($),type:"danger",icon:"delete",circle:""},null,8,["disabled"])]),_:1},8,["title"])]),actions:n(({scope:s})=>[a(t,{size:"small",onClick:H=>e(_)(s.row)},{default:n(()=>[w(k(e(f)("page.common.btn.edit")),1)]),_:2},1032,["onClick"]),a(p,{title:e(f)("page.common.btn.delete_popover"),onConfirm:H=>e(A)(s.row.id)},{reference:n(()=>[a(t,{size:"small",type:"danger"},{default:n(()=>[w(k(e(f)("page.common.btn.delete")),1)]),_:1})]),_:2},1032,["title","onConfirm"])]),_:1},8,["table-data","columns","onSelectionChange"])),[[R,e(v)]]),U("div",Se,[a(S,{currentPage:e(o).current,"onUpdate:currentPage":u[1]||(u[1]=s=>e(o).current=s),"page-size":e(o).pageSize,"onUpdate:pageSize":u[2]||(u[2]=s=>e(o).pageSize=s),small:"","page-sizes":e(o).pageSizeOptions,background:!0,layout:"sizes, prev, pager, next",total:e(o).total,onSizeChange:e(l),onCurrentChange:e(V)},null,8,["currentPage","page-size","page-sizes","total","onSizeChange","onCurrentChange"])])]),a(ve,{ref_key:"modalFormRef",ref:F,onClose:e(D)},null,8,["onClose"])])}}});export{it as default};
