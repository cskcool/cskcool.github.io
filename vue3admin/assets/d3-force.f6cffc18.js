import{q as P}from"./d3-quadtree.b3cda503.js";import{t as R}from"./d3-timer.cfe5c7f2.js";import{d as b}from"./d3-dispatch.1dc92aff.js";function Z(n,f){var o,y=1;n==null&&(n=0),f==null&&(f=0);function x(){var c,h=o.length,t,s=0,r=0;for(c=0;c<h;++c)t=o[c],s+=t.x,r+=t.y;for(s=(s/h-n)*y,r=(r/h-f)*y,c=0;c<h;++c)t=o[c],t.x-=s,t.y-=r}return x.initialize=function(c){o=c},x.x=function(c){return arguments.length?(n=+c,x):n},x.y=function(c){return arguments.length?(f=+c,x):f},x.strength=function(c){return arguments.length?(y=+c,x):y},x}function w(n){return function(){return n}}function B(n){return(n()-.5)*1e-6}function C(n){return n.x+n.vx}function G(n){return n.y+n.vy}function q(n){var f,o,y,x=1,c=1;typeof n!="function"&&(n=w(n==null?1:+n));function h(){for(var r,v=f.length,d,m,u,p,i,e,a=0;a<c;++a)for(d=P(f,C,G).visitAfter(t),r=0;r<v;++r)m=f[r],i=o[m.index],e=i*i,u=m.x+m.vx,p=m.y+m.vy,d.visit(g);function g(M,l,N,D,j){var z=M.data,E=M.r,A=i+E;if(z){if(z.index>m.index){var I=u-z.x-z.vx,S=p-z.y-z.vy,$=I*I+S*S;$<A*A&&(I===0&&(I=B(y),$+=I*I),S===0&&(S=B(y),$+=S*S),$=(A-($=Math.sqrt($)))/$*x,m.vx+=(I*=$)*(A=(E*=E)/(e+E)),m.vy+=(S*=$)*A,z.vx-=I*(A=1-A),z.vy-=S*A)}return}return l>u+A||D<u-A||N>p+A||j<p-A}}function t(r){if(r.data)return r.r=o[r.data.index];for(var v=r.r=0;v<4;++v)r[v]&&r[v].r>r.r&&(r.r=r[v].r)}function s(){if(!!f){var r,v=f.length,d;for(o=new Array(v),r=0;r<v;++r)d=f[r],o[d.index]=+n(d,r,f)}}return h.initialize=function(r,v){f=r,y=v,s()},h.iterations=function(r){return arguments.length?(c=+r,h):c},h.strength=function(r){return arguments.length?(x=+r,h):x},h.radius=function(r){return arguments.length?(n=typeof r=="function"?r:w(+r),s(),h):n},h}function H(n){return n.index}function T(n,f){var o=n.get(f);if(!o)throw new Error("node not found: "+f);return o}function k(n){var f=H,o=d,y,x=w(30),c,h,t,s,r,v=1;n==null&&(n=[]);function d(e){return 1/Math.min(t[e.source.index],t[e.target.index])}function m(e){for(var a=0,g=n.length;a<v;++a)for(var M=0,l,N,D,j,z,E,A;M<g;++M)l=n[M],N=l.source,D=l.target,j=D.x+D.vx-N.x-N.vx||B(r),z=D.y+D.vy-N.y-N.vy||B(r),E=Math.sqrt(j*j+z*z),E=(E-c[M])/E*e*y[M],j*=E,z*=E,D.vx-=j*(A=s[M]),D.vy-=z*A,N.vx+=j*(A=1-A),N.vy+=z*A}function u(){if(!!h){var e,a=h.length,g=n.length,M=new Map(h.map((N,D)=>[f(N,D,h),N])),l;for(e=0,t=new Array(a);e<g;++e)l=n[e],l.index=e,typeof l.source!="object"&&(l.source=T(M,l.source)),typeof l.target!="object"&&(l.target=T(M,l.target)),t[l.source.index]=(t[l.source.index]||0)+1,t[l.target.index]=(t[l.target.index]||0)+1;for(e=0,s=new Array(g);e<g;++e)l=n[e],s[e]=t[l.source.index]/(t[l.source.index]+t[l.target.index]);y=new Array(g),p(),c=new Array(g),i()}}function p(){if(!!h)for(var e=0,a=n.length;e<a;++e)y[e]=+o(n[e],e,n)}function i(){if(!!h)for(var e=0,a=n.length;e<a;++e)c[e]=+x(n[e],e,n)}return m.initialize=function(e,a){h=e,r=a,u()},m.links=function(e){return arguments.length?(n=e,u(),m):n},m.id=function(e){return arguments.length?(f=e,m):f},m.iterations=function(e){return arguments.length?(v=+e,m):v},m.strength=function(e){return arguments.length?(o=typeof e=="function"?e:w(+e),p(),m):o},m.distance=function(e){return arguments.length?(x=typeof e=="function"?e:w(+e),i(),m):x},m}const J=1664525,K=1013904223,F=4294967296;function L(){let n=1;return()=>(n=(J*n+K)%F)/F}function O(n){return n.x}function Q(n){return n.y}var U=10,V=Math.PI*(3-Math.sqrt(5));function _(n){var f,o=1,y=.001,x=1-Math.pow(y,1/300),c=0,h=.6,t=new Map,s=R(d),r=b("tick","end"),v=L();n==null&&(n=[]);function d(){m(),r.call("tick",f),o<y&&(s.stop(),r.call("end",f))}function m(i){var e,a=n.length,g;i===void 0&&(i=1);for(var M=0;M<i;++M)for(o+=(c-o)*x,t.forEach(function(l){l(o)}),e=0;e<a;++e)g=n[e],g.fx==null?g.x+=g.vx*=h:(g.x=g.fx,g.vx=0),g.fy==null?g.y+=g.vy*=h:(g.y=g.fy,g.vy=0);return f}function u(){for(var i=0,e=n.length,a;i<e;++i){if(a=n[i],a.index=i,a.fx!=null&&(a.x=a.fx),a.fy!=null&&(a.y=a.fy),isNaN(a.x)||isNaN(a.y)){var g=U*Math.sqrt(.5+i),M=i*V;a.x=g*Math.cos(M),a.y=g*Math.sin(M)}(isNaN(a.vx)||isNaN(a.vy))&&(a.vx=a.vy=0)}}function p(i){return i.initialize&&i.initialize(n,v),i}return u(),f={tick:m,restart:function(){return s.restart(d),f},stop:function(){return s.stop(),f},nodes:function(i){return arguments.length?(n=i,u(),t.forEach(p),f):n},alpha:function(i){return arguments.length?(o=+i,f):o},alphaMin:function(i){return arguments.length?(y=+i,f):y},alphaDecay:function(i){return arguments.length?(x=+i,f):+x},alphaTarget:function(i){return arguments.length?(c=+i,f):c},velocityDecay:function(i){return arguments.length?(h=1-i,f):1-h},randomSource:function(i){return arguments.length?(v=i,t.forEach(p),f):v},force:function(i,e){return arguments.length>1?(e==null?t.delete(i):t.set(i,p(e)),f):t.get(i)},find:function(i,e,a){var g=0,M=n.length,l,N,D,j,z;for(a==null?a=1/0:a*=a,g=0;g<M;++g)j=n[g],l=i-j.x,N=e-j.y,D=l*l+N*N,D<a&&(z=j,a=D);return z},on:function(i,e){return arguments.length>1?(r.on(i,e),f):r.on(i)}}}function nn(){var n,f,o,y,x=w(-30),c,h=1,t=1/0,s=.81;function r(u){var p,i=n.length,e=P(n,O,Q).visitAfter(d);for(y=u,p=0;p<i;++p)f=n[p],e.visit(m)}function v(){if(!!n){var u,p=n.length,i;for(c=new Array(p),u=0;u<p;++u)i=n[u],c[i.index]=+x(i,u,n)}}function d(u){var p=0,i,e,a=0,g,M,l;if(u.length){for(g=M=l=0;l<4;++l)(i=u[l])&&(e=Math.abs(i.value))&&(p+=i.value,a+=e,g+=e*i.x,M+=e*i.y);u.x=g/a,u.y=M/a}else{i=u,i.x=i.data.x,i.y=i.data.y;do p+=c[i.data.index];while(i=i.next)}u.value=p}function m(u,p,i,e){if(!u.value)return!0;var a=u.x-f.x,g=u.y-f.y,M=e-p,l=a*a+g*g;if(M*M/s<l)return l<t&&(a===0&&(a=B(o),l+=a*a),g===0&&(g=B(o),l+=g*g),l<h&&(l=Math.sqrt(h*l)),f.vx+=a*u.value*y/l,f.vy+=g*u.value*y/l),!0;if(u.length||l>=t)return;(u.data!==f||u.next)&&(a===0&&(a=B(o),l+=a*a),g===0&&(g=B(o),l+=g*g),l<h&&(l=Math.sqrt(h*l)));do u.data!==f&&(M=c[u.data.index]*y/l,f.vx+=a*M,f.vy+=g*M);while(u=u.next)}return r.initialize=function(u,p){n=u,o=p,v()},r.strength=function(u){return arguments.length?(x=typeof u=="function"?u:w(+u),v(),r):x},r.distanceMin=function(u){return arguments.length?(h=u*u,r):Math.sqrt(h)},r.distanceMax=function(u){return arguments.length?(t=u*u,r):Math.sqrt(t)},r.theta=function(u){return arguments.length?(s=u*u,r):Math.sqrt(s)},r}function tn(n,f,o){var y,x=w(.1),c,h;typeof n!="function"&&(n=w(+n)),f==null&&(f=0),o==null&&(o=0);function t(r){for(var v=0,d=y.length;v<d;++v){var m=y[v],u=m.x-f||1e-6,p=m.y-o||1e-6,i=Math.sqrt(u*u+p*p),e=(h[v]-i)*c[v]*r/i;m.vx+=u*e,m.vy+=p*e}}function s(){if(!!y){var r,v=y.length;for(c=new Array(v),h=new Array(v),r=0;r<v;++r)h[r]=+n(y[r],r,y),c[r]=isNaN(h[r])?0:+x(y[r],r,y)}}return t.initialize=function(r){y=r,s()},t.strength=function(r){return arguments.length?(x=typeof r=="function"?r:w(+r),s(),t):x},t.radius=function(r){return arguments.length?(n=typeof r=="function"?r:w(+r),s(),t):n},t.x=function(r){return arguments.length?(f=+r,t):f},t.y=function(r){return arguments.length?(o=+r,t):o},t}function rn(n){var f=w(.1),o,y,x;typeof n!="function"&&(n=w(n==null?0:+n));function c(t){for(var s=0,r=o.length,v;s<r;++s)v=o[s],v.vx+=(x[s]-v.x)*y[s]*t}function h(){if(!!o){var t,s=o.length;for(y=new Array(s),x=new Array(s),t=0;t<s;++t)y[t]=isNaN(x[t]=+n(o[t],t,o))?0:+f(o[t],t,o)}}return c.initialize=function(t){o=t,h()},c.strength=function(t){return arguments.length?(f=typeof t=="function"?t:w(+t),h(),c):f},c.x=function(t){return arguments.length?(n=typeof t=="function"?t:w(+t),h(),c):n},c}function en(n){var f=w(.1),o,y,x;typeof n!="function"&&(n=w(n==null?0:+n));function c(t){for(var s=0,r=o.length,v;s<r;++s)v=o[s],v.vy+=(x[s]-v.y)*y[s]*t}function h(){if(!!o){var t,s=o.length;for(y=new Array(s),x=new Array(s),t=0;t<s;++t)y[t]=isNaN(x[t]=+n(o[t],t,o))?0:+f(o[t],t,o)}}return c.initialize=function(t){o=t,h()},c.strength=function(t){return arguments.length?(f=typeof t=="function"?t:w(+t),h(),c):f},c.y=function(t){return arguments.length?(n=typeof t=="function"?t:w(+t),h(),c):n},c}export{q as a,Z as c,k as l,nn as m,tn as r,_ as s,rn as x,en as y};
